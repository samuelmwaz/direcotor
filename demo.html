<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CNS Director | Command Center</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg: #080e1a;
            --surface: #0f1c2e;
            --card: #132035;
            --card2: #0c1929;
            --border: rgba(255,255,255,0.07);
            --text: #e8f0fe;
            --muted: #6a8aaa;
            --urgent: #ff3b5c;
            --warning: #ffb800;
            --safe: #00e5a0;
            --accent: #2979ff;
            --accent2: #00b4ff;
            --header-h: 64px;
            --nav-h: 80px;
            --safe-bottom: env(safe-area-inset-bottom, 16px);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'DM Sans', sans-serif;
            margin: 0;
            min-height: 100dvh;
            overscroll-behavior: none;
            -webkit-font-smoothing: antialiased;
        }

        /* Subtle mesh background */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: radial-gradient(ellipse 70% 50% at 20% 10%, rgba(41,121,255,0.10) 0%, transparent 70%),
                        radial-gradient(ellipse 50% 40% at 80% 80%, rgba(0,180,255,0.07) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }

        /* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .header {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: var(--header-h);
            background: rgba(8,14,26,0.92);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 18px;
            z-index: 100;
        }

        .header-brand { display: flex; flex-direction: column; }
        .header-brand span:first-child { font-family: 'Space Mono', monospace; font-size: 0.8rem; color: var(--accent2); letter-spacing: 0.08em; }
        .header-brand span:last-child { font-size: 1.05rem; font-weight: 700; line-height: 1.2; }

        #status-clock {
            font-family: 'Space Mono', monospace;
            font-size: 0.75rem;
            color: var(--safe);
            background: rgba(0,229,160,0.08);
            border: 1px solid rgba(0,229,160,0.2);
            padding: 6px 10px;
            border-radius: 8px;
            white-space: nowrap;
        }

        /* â”€â”€ SCROLL AREA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .scroll-area {
            padding: calc(var(--header-h) + 16px) 14px calc(var(--nav-h) + 40px);
            position: relative;
            z-index: 1;
        }

        /* â”€â”€ SECTION TITLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .section-title {
            font-size: 0.65rem;
            font-weight: 600;
            letter-spacing: 0.14em;
            text-transform: uppercase;
            color: var(--muted);
            margin: 22px 0 10px 4px;
        }

        /* â”€â”€ CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .card {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 18px;
            margin-bottom: 12px;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent);
        }

        .card-title {
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--muted);
            margin: 0 0 14px;
        }

        /* â”€â”€ KPI ROW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .kpi-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 12px;
        }

        .kpi {
            background: var(--card2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px 12px;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .kpi-label { font-size: 0.68rem; color: var(--muted); font-weight: 500; }
        .kpi-value { font-family: 'Space Mono', monospace; font-size: 1.45rem; font-weight: 700; line-height: 1; }
        .kpi-sub { font-size: 0.68rem; color: var(--muted); }
        .kpi-value.green { color: var(--safe); }
        .kpi-value.yellow { color: var(--warning); }
        .kpi-value.red { color: var(--urgent); }

        /* â”€â”€ COMPLIANCE ITEMS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .compliance-item {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 14px;
            background: var(--card2);
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-bottom: 8px;
            position: relative;
            transition: transform 0.15s;
        }

        .compliance-item:active { transform: scale(0.98); }

        .status-dot {
            width: 12px; height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .dot-green  { background: var(--safe);    box-shadow: 0 0 10px var(--safe); }
        .dot-yellow { background: var(--warning);  box-shadow: 0 0 10px var(--warning); }
        .dot-red    { background: var(--urgent);   box-shadow: 0 0 10px var(--urgent); animation: blink 1.2s infinite; }

        @keyframes blink { 50% { opacity: 0.3; } }

        .ci-info { flex: 1; min-width: 0; }
        .ci-info strong { display: block; font-size: 0.88rem; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .ci-info p { margin: 2px 0 0; font-size: 0.73rem; color: var(--muted); }
        .ci-badge {
            font-size: 0.6rem; font-weight: 700; letter-spacing: 0.08em;
            padding: 3px 7px; border-radius: 20px; text-transform: uppercase; flex-shrink: 0;
        }
        .badge-green  { background: rgba(0,229,160,0.12); color: var(--safe); border: 1px solid rgba(0,229,160,0.25); }
        .badge-yellow { background: rgba(255,184,0,0.12); color: var(--warning); border: 1px solid rgba(255,184,0,0.3); }
        .badge-red    { background: rgba(255,59,92,0.12); color: var(--urgent); border: 1px solid rgba(255,59,92,0.3); }

        /* â”€â”€ PROGRESS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .progress-wrap { margin-bottom: 10px; }
        .progress-header { display: flex; justify-content: space-between; font-size: 0.82rem; margin-bottom: 6px; }
        .progress-header span:last-child { font-family: 'Space Mono', monospace; font-size: 0.8rem; }
        .progress-bar-bg { background: rgba(255,255,255,0.07); height: 7px; border-radius: 10px; overflow: hidden; }
        .progress-bar-fill { height: 100%; border-radius: 10px; transition: width 1s cubic-bezier(0.4,0,0.2,1); }

        /* â”€â”€ MEETING CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .meeting-item {
            background: var(--card2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .meeting-date-block {
            background: rgba(41,121,255,0.15);
            border: 1px solid rgba(41,121,255,0.25);
            border-radius: 10px;
            padding: 8px 10px;
            text-align: center;
            min-width: 44px;
            flex-shrink: 0;
        }

        .meeting-date-block .day { font-family: 'Space Mono', monospace; font-size: 1.2rem; font-weight: 700; color: var(--accent2); line-height: 1; }
        .meeting-date-block .mon { font-size: 0.6rem; text-transform: uppercase; color: var(--muted); letter-spacing: 0.08em; }

        .meeting-info { flex: 1; min-width: 0; }
        .meeting-info strong { display: block; font-size: 0.9rem; font-weight: 600; }
        .meeting-info p { margin: 2px 0 0; font-size: 0.73rem; color: var(--muted); }
        .meeting-info .countdown { font-size: 0.7rem; color: var(--warning); font-weight: 600; margin-top: 4px; }

        .remind-btn {
            background: rgba(41,121,255,0.15);
            border: 1px solid rgba(41,121,255,0.3);
            color: var(--accent2);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.72rem;
            font-weight: 700;
            cursor: pointer;
            white-space: nowrap;
            transition: background 0.2s;
            flex-shrink: 0;
        }

        .remind-btn:active { background: rgba(41,121,255,0.3); }
        .remind-btn.armed { background: rgba(0,229,160,0.12); border-color: rgba(0,229,160,0.3); color: var(--safe); }

        /* â”€â”€ ACTION LOG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .log-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.8rem;
        }

        .log-item:last-child { border-bottom: none; padding-bottom: 0; }
        .log-dot { width: 7px; height: 7px; border-radius: 50%; margin-top: 5px; flex-shrink: 0; }
        .log-text { flex: 1; color: var(--muted); line-height: 1.4; }
        .log-text strong { color: var(--text); }
        .log-time { font-family: 'Space Mono', monospace; font-size: 0.65rem; color: var(--muted); margin-top: 2px; }

        /* â”€â”€ QUICK ACTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .action-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }

        .action-btn {
            background: var(--card2);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px 12px;
            color: var(--text);
            cursor: pointer;
            text-align: left;
            transition: border-color 0.2s, background 0.2s;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .action-btn:active { background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.15); }
        .action-btn .ab-icon { font-size: 1.3rem; }
        .action-btn .ab-label { font-size: 0.82rem; font-weight: 600; }
        .action-btn .ab-sub { font-size: 0.68rem; color: var(--muted); }

        /* â”€â”€ BOTTOM NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .bottom-nav {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            height: auto;
            background: rgba(8,14,26,0.98);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 2px solid rgba(41,121,255,0.35);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 10px 6px;
            padding-bottom: calc(10px + env(safe-area-inset-bottom, 10px));
            z-index: 100;
            box-shadow: 0 -8px 30px rgba(0,0,0,0.6);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            padding: 10px 16px;
            border-radius: 14px;
            cursor: pointer;
            transition: background 0.15s;
            flex: 1;
            min-height: 56px;
            justify-content: center;
        }

        .nav-item.active { background: rgba(41,121,255,0.18); border: 1px solid rgba(41,121,255,0.25); }
        .nav-item .nav-icon { font-size: 1.5rem; line-height: 1; }
        .nav-item .nav-label { font-size: 0.62rem; font-weight: 700; letter-spacing: 0.05em; color: var(--muted); text-transform: uppercase; }
        .nav-item.active .nav-label { color: var(--accent2); }

        /* â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #toast {
            position: fixed;
            bottom: calc(100px + env(safe-area-inset-bottom, 10px));
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: var(--safe);
            color: #000;
            font-weight: 700;
            font-size: 0.82rem;
            padding: 10px 22px;
            border-radius: 50px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            z-index: 200;
            white-space: nowrap;
        }

        #toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

        /* â”€â”€ PAGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .page { display: none; }
        .page.active { display: block; }

        /* â”€â”€ ACCOUNTABILITY MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(4px);
            z-index: 300;
            display: none;
            align-items: flex-end;
            justify-content: center;
        }

        .modal-overlay.show { display: flex; }

        .modal-sheet {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 22px 22px 0 0;
            padding: 24px 20px 40px;
            width: 100%;
            max-width: 480px;
            animation: slideUp 0.3s cubic-bezier(0.4,0,0.2,1);
        }

        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        .modal-handle { width: 40px; height: 4px; background: var(--border); border-radius: 2px; margin: 0 auto 20px; }
        .modal-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 16px; }

        .resolution-textarea {
            width: 100%;
            background: var(--card2);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-family: 'DM Sans', sans-serif;
            font-size: 0.9rem;
            padding: 12px;
            resize: none;
            height: 100px;
            margin-bottom: 12px;
        }

        .resolution-textarea:focus { outline: none; border-color: rgba(41,121,255,0.5); }

        .modal-row { display: flex; gap: 8px; }
        .modal-btn {
            flex: 1; padding: 14px; border-radius: 10px; font-size: 0.88rem; font-weight: 700;
            cursor: pointer; border: none;
        }
        .modal-btn.primary { background: var(--accent); color: white; }
        .modal-btn.secondary { background: var(--card2); color: var(--muted); border: 1px solid var(--border); }
    </style>
</head>
<body>

<div class="header">
    <div class="header-brand">
        <span>CNS PORTAL</span>
        <span>Director Command</span>
    </div>
    <div id="status-clock">--:--:-- CAT</div>
</div>

<!-- â”€â”€ PAGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->

<div class="scroll-area">

    <!-- PAGE: DASHBOARD -->
    <div class="page active" id="page-home">

        <div class="section-title">Overview Â· Today</div>

        <div class="kpi-row">
            <div class="kpi">
                <span class="kpi-label">Open Actions</span>
                <span class="kpi-value yellow" id="kpi-open">3</span>
                <span class="kpi-sub">Require your input</span>
            </div>
            <div class="kpi">
                <span class="kpi-label">Compliance</span>
                <span class="kpi-value green" id="kpi-comp">OK</span>
                <span class="kpi-sub" id="kpi-comp-sub">2 of 2 clear</span>
            </div>
        </div>

        <div class="kpi-row">
            <div class="kpi">
                <span class="kpi-label">Next Meeting</span>
                <span class="kpi-value green" id="kpi-days">6d</span>
                <span class="kpi-sub">Feb 25 Â· Board</span>
            </div>
            <div class="kpi">
                <span class="kpi-label">Fiber Phase 3</span>
                <span class="kpi-value green">78%</span>
                <span class="kpi-sub">On schedule</span>
            </div>
        </div>

        <div class="section-title">Compliance Radar</div>

        <div class="card" style="padding: 14px;">
            <div class="compliance-item" id="ci-zra">
                <div class="status-dot" id="zra-dot"></div>
                <div class="ci-info">
                    <strong>ZRA Smart Invoice</strong>
                    <p id="zra-desc">Calculatingâ€¦</p>
                </div>
                <span class="ci-badge" id="zra-badge">â€”</span>
            </div>
            <div class="compliance-item" id="ci-pacra">
                <div class="status-dot dot-green" id="pacra-dot"></div>
                <div class="ci-info">
                    <strong>PACRA Annual Return</strong>
                    <p id="pacra-desc">Compliant Â· Next: Mar 2026</p>
                </div>
                <span class="ci-badge badge-green" id="pacra-badge">Clear</span>
            </div>
        </div>

        <div class="section-title">Fiber Infrastructure</div>

        <div class="card">
            <div class="progress-wrap">
                <div class="progress-header">
                    <span>Lusaka Metro Phase 3</span>
                    <span style="color:var(--safe);">78%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" style="width:78%; background: var(--safe);"></div>
                </div>
            </div>
            <div class="progress-wrap">
                <div class="progress-header">
                    <span>Copper Belt Phase 1</span>
                    <span style="color:var(--warning);">44%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" style="width:44%; background: var(--warning);"></div>
                </div>
            </div>
            <div class="progress-wrap" style="margin-bottom:0">
                <div class="progress-header">
                    <span>Eastern Province</span>
                    <span style="color:var(--urgent);">12%</span>
                </div>
                <div class="progress-bar-bg">
                    <div class="progress-bar-fill" style="width:12%; background: var(--urgent);"></div>
                </div>
            </div>
        </div>

        <div class="section-title">Quick Actions</div>

        <div class="card" style="padding:14px;">
            <div class="action-grid">
                <button class="action-btn" onclick="openModal('log')">
                    <span class="ab-icon">ğŸ“</span>
                    <span class="ab-label">Log Resolution</span>
                    <span class="ab-sub">Record a decision</span>
                </button>
                <button class="action-btn" onclick="switchPage('actions')">
                    <span class="ab-icon">âœ…</span>
                    <span class="ab-label">Action Items</span>
                    <span class="ab-sub">3 pending</span>
                </button>
                <button class="action-btn" onclick="switchPage('meetings')">
                    <span class="ab-icon">ğŸ“…</span>
                    <span class="ab-label">Meetings</span>
                    <span class="ab-sub">Schedule & prep</span>
                </button>
                <button class="action-btn" onclick="switchPage('audit')">
                    <span class="ab-icon">ğŸ”</span>
                    <span class="ab-label">Audit Trail</span>
                    <span class="ab-sub">All activity</span>
                </button>
            </div>
        </div>

    </div>

    <!-- PAGE: ACTION ITEMS / ACCOUNTABILITY -->
    <div class="page" id="page-actions">

        <div class="section-title">Action Items Â· Accountability</div>

        <div class="card" id="actions-list">
            <!-- dynamically rendered -->
        </div>

        <div class="section-title">Add New Action</div>

        <div class="card">
            <input id="new-action-text" type="text" placeholder="Describe the action itemâ€¦" style="width:100%;background:var(--card2);border:1px solid var(--border);border-radius:10px;color:var(--text);font-family:'DM Sans',sans-serif;font-size:0.88rem;padding:12px;margin-bottom:10px;">
            <select id="new-action-owner" style="width:100%;background:var(--card2);border:1px solid var(--border);border-radius:10px;color:var(--muted);font-family:'DM Sans',sans-serif;font-size:0.88rem;padding:12px;margin-bottom:10px;">
                <option value="">Assign to directorâ€¦</option>
                <option>Dir. Banda</option>
                <option>Dir. Mwale</option>
                <option>Dir. Phiri</option>
                <option>Dir. Tembo</option>
                <option>Yourself</option>
            </select>
            <input id="new-action-due" type="date" style="width:100%;background:var(--card2);border:1px solid var(--border);border-radius:10px;color:var(--muted);font-family:'DM Sans',sans-serif;font-size:0.88rem;padding:12px;margin-bottom:12px;">
            <button class="modal-btn primary" onclick="addAction()" style="width:100%;">Add Action Item</button>
        </div>

    </div>

    <!-- PAGE: MEETINGS -->
    <div class="page" id="page-meetings">

        <div class="section-title">Scheduled Meetings</div>

        <div class="card" style="padding:14px;">
            <div class="meeting-item">
                <div class="meeting-date-block">
                    <div class="day">25</div>
                    <div class="mon">Feb</div>
                </div>
                <div class="meeting-info">
                    <strong>Board Strategy Meeting</strong>
                    <p>09:00 CAT Â· Head Office, Lusaka</p>
                    <p class="countdown" id="board-countdown">Calculatingâ€¦</p>
                </div>
                <button class="remind-btn" id="remind-board" onclick="toggleReminder(this, 'Board Strategy')">ğŸ”” Set</button>
            </div>
            <div class="meeting-item">
                <div class="meeting-date-block">
                    <div class="day">10</div>
                    <div class="mon">Mar</div>
                </div>
                <div class="meeting-info">
                    <strong>ZRA Compliance Review</strong>
                    <p>14:00 CAT Â· ZRA House, Cairo Rd</p>
                    <p class="countdown">19 days away</p>
                </div>
                <button class="remind-btn" onclick="toggleReminder(this, 'ZRA Review')">ğŸ”” Set</button>
            </div>
            <div class="meeting-item">
                <div class="meeting-date-block">
                    <div class="day">28</div>
                    <div class="mon">Mar</div>
                </div>
                <div class="meeting-info">
                    <strong>Q1 Financial Debrief</strong>
                    <p>10:00 CAT Â· Virtual (Teams)</p>
                    <p class="countdown">37 days away</p>
                </div>
                <button class="remind-btn" onclick="toggleReminder(this, 'Q1 Debrief')">ğŸ”” Set</button>
            </div>
        </div>

        <div class="section-title">Pre-meeting Prep</div>
        <div class="card">
            <p style="font-size:0.85rem; margin:0 0 12px; color:var(--muted);">Upload or note agenda items before your next board meeting.</p>
            <textarea placeholder="Agenda notes, topics to raise, documents to reviewâ€¦" style="width:100%;background:var(--card2);border:1px solid var(--border);border-radius:10px;color:var(--text);font-family:'DM Sans',sans-serif;font-size:0.85rem;padding:12px;resize:none;height:90px;"></textarea>
        </div>

    </div>

    <!-- PAGE: AUDIT TRAIL -->
    <div class="page" id="page-audit">

        <div class="section-title">Audit Trail Â· All Activity</div>

        <div class="card">
            <div id="audit-log">
                <!-- dynamically rendered -->
            </div>
        </div>

    </div>

</div><!-- end scroll-area -->

<!-- â”€â”€ BOTTOM NAV â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<nav class="bottom-nav">
    <div class="nav-item active" onclick="switchPage('home', this)">
        <span class="nav-icon">ğŸ </span>
        <span class="nav-label">Dashboard</span>
    </div>
    <div class="nav-item" onclick="switchPage('actions', this)">
        <span class="nav-icon">âœ…</span>
        <span class="nav-label">Actions</span>
    </div>
    <div class="nav-item" onclick="switchPage('meetings', this)">
        <span class="nav-icon">ğŸ“…</span>
        <span class="nav-label">Meetings</span>
    </div>
    <div class="nav-item" onclick="switchPage('audit', this)">
        <span class="nav-icon">ğŸ”</span>
        <span class="nav-label">Audit</span>
    </div>
</nav>

<!-- â”€â”€ MODAL: LOG RESOLUTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="modal-overlay" id="modal-log">
    <div class="modal-sheet">
        <div class="modal-handle"></div>
        <div class="modal-title">Log a Resolution</div>
        <textarea class="resolution-textarea" id="resolution-text" placeholder="Describe the resolution or decision madeâ€¦"></textarea>
        <select id="resolution-owner" style="width:100%;background:var(--card2);border:1px solid var(--border);border-radius:10px;color:var(--muted);font-family:'DM Sans',sans-serif;font-size:0.88rem;padding:12px;margin-bottom:12px;">
            <option value="">Responsible directorâ€¦</option>
            <option>Dir. Banda</option>
            <option>Dir. Mwale</option>
            <option>Dir. Phiri</option>
            <option>Dir. Tembo</option>
            <option>Yourself</option>
        </select>
        <div class="modal-row">
            <button class="modal-btn secondary" onclick="closeModal()">Cancel</button>
            <button class="modal-btn primary" onclick="saveResolution()">Save Resolution</button>
        </div>
    </div>
</div>

<!-- â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div id="toast">âœ“ Done</div>

<script>
// â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let auditLog = [
    { text: '<strong>System</strong> loaded portal', time: 'Just now', color: 'var(--accent2)' }
];

let actions = [
    { id: 1, text: 'Confirm Q1 budget variance report', owner: 'Dir. Banda', due: '2026-02-22', done: false },
    { id: 2, text: 'Sign off ZRA compliance submission', owner: 'Yourself', due: '2026-02-24', done: false },
    { id: 3, text: 'Review Copper Belt Phase 1 contractor bids', owner: 'Dir. Mwale', due: '2026-02-28', done: false },
];

// â”€â”€ CLOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateClock() {
    const now = new Date();
    document.getElementById('status-clock').textContent = now.toLocaleString('en-GB', {
        timeZone: 'Africa/Lusaka',
        hour: '2-digit', minute: '2-digit', second: '2-digit'
    }) + ' CAT';
}
setInterval(updateClock, 1000);
updateClock();

// â”€â”€ COMPLIANCE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function runCompliance() {
    const today = new Date();
    const day = today.getDate();
    const zraDot = document.getElementById('zra-dot');
    const zraDesc = document.getElementById('zra-desc');
    const zraBadge = document.getElementById('zra-badge');

    if (day <= 7) {
        zraDot.className = 'status-dot dot-green';
        zraDesc.textContent = 'Next filing due in ' + (14 - day) + ' days.';
        zraBadge.textContent = 'OK'; zraBadge.className = 'ci-badge badge-green';
    } else if (day <= 14) {
        zraDot.className = 'status-dot dot-yellow';
        zraDesc.textContent = 'Filing window open â€” verify now.';
        zraBadge.textContent = 'Soon'; zraBadge.className = 'ci-badge badge-yellow';
        document.getElementById('kpi-comp').textContent = '!';
        document.getElementById('kpi-comp').className = 'kpi-value yellow';
        document.getElementById('kpi-comp-sub').textContent = '1 needs attention';
    } else {
        zraDot.className = 'status-dot dot-red';
        zraDesc.textContent = 'URGENT: Verify monthly return status!';
        zraBadge.textContent = 'Urgent'; zraBadge.className = 'ci-badge badge-red';
        document.getElementById('kpi-comp').textContent = '!';
        document.getElementById('kpi-comp').className = 'kpi-value red';
        document.getElementById('kpi-comp-sub').textContent = '1 overdue';
    }
}

// â”€â”€ COUNTDOWN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateCountdowns() {
    const now = new Date();
    const board = new Date('2026-02-25T09:00:00+02:00');
    const diff = board - now;
    if (diff > 0) {
        const d = Math.floor(diff / 86400000);
        const h = Math.floor((diff % 86400000) / 3600000);
        document.getElementById('board-countdown').textContent = d + 'd ' + h + 'h away';
        document.getElementById('kpi-days').textContent = d + 'd';
    } else {
        document.getElementById('board-countdown').textContent = 'Meeting passed';
    }
}
setInterval(updateCountdowns, 60000);
updateCountdowns();

// â”€â”€ PAGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function switchPage(name, navEl) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById('page-' + name).classList.add('active');
    if (navEl) {
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        navEl.classList.add('active');
    }
    if (name === 'actions') renderActions();
    if (name === 'audit') renderAudit();
}

// â”€â”€ ACTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderActions() {
    const container = document.getElementById('actions-list');
    const pending = actions.filter(a => !a.done);
    const done = actions.filter(a => a.done);

    let html = '';
    if (pending.length === 0) {
        html = '<p style="text-align:center;color:var(--muted);font-size:0.85rem;padding:20px 0;">All caught up! No pending actions.</p>';
    } else {
        pending.forEach(a => {
            const due = new Date(a.due);
            const today = new Date();
            const overdue = due < today;
            html += `
            <div class="compliance-item" style="margin-bottom:8px;">
                <div class="status-dot" style="background:${overdue ? 'var(--urgent)' : 'var(--warning)'};box-shadow:0 0 8px ${overdue ? 'var(--urgent)' : 'var(--warning)'}"></div>
                <div class="ci-info">
                    <strong>${a.text}</strong>
                    <p>${a.owner} Â· Due ${a.due}</p>
                </div>
                <button onclick="markDone(${a.id})" style="background:rgba(0,229,160,0.1);border:1px solid rgba(0,229,160,0.25);color:var(--safe);border-radius:8px;padding:6px 10px;font-size:0.7rem;font-weight:700;cursor:pointer;">Done</button>
            </div>`;
        });
    }

    if (done.length > 0) {
        html += `<div style="font-size:0.68rem;color:var(--muted);margin:14px 0 8px;letter-spacing:0.1em;text-transform:uppercase;">Completed (${done.length})</div>`;
        done.forEach(a => {
            html += `<div class="compliance-item" style="opacity:0.4;margin-bottom:8px;">
                <div class="status-dot dot-green"></div>
                <div class="ci-info"><strong style="text-decoration:line-through;">${a.text}</strong><p>${a.owner}</p></div>
            </div>`;
        });
    }

    container.innerHTML = html;
    document.getElementById('kpi-open').textContent = pending.length;
}

function markDone(id) {
    const a = actions.find(x => x.id === id);
    if (!a) return;
    a.done = true;
    addAuditEntry(`<strong>${a.owner}</strong> marked "<em>${a.text.substring(0,32)}â€¦</em>" as complete`, 'var(--safe)');
    renderActions();
    showToast('âœ“ Action marked complete');
}

function addAction() {
    const text = document.getElementById('new-action-text').value.trim();
    const owner = document.getElementById('new-action-owner').value;
    const due = document.getElementById('new-action-due').value;
    if (!text || !owner || !due) { showToast('âš  Fill in all fields'); return; }
    const id = Date.now();
    actions.push({ id, text, owner, due, done: false });
    addAuditEntry(`<strong>New action</strong> assigned to ${owner}: "${text.substring(0,30)}â€¦"`, 'var(--accent2)');
    document.getElementById('new-action-text').value = '';
    document.getElementById('new-action-owner').value = '';
    document.getElementById('new-action-due').value = '';
    renderActions();
    showToast('âœ“ Action item added');
}

// â”€â”€ AUDIT LOG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function addAuditEntry(text, color) {
    const now = new Date();
    const time = now.toLocaleString('en-GB', { timeZone: 'Africa/Lusaka', hour: '2-digit', minute: '2-digit' }) + ' CAT';
    auditLog.unshift({ text, time, color: color || 'var(--muted)' });
}

function renderAudit() {
    const container = document.getElementById('audit-log');
    if (auditLog.length === 0) {
        container.innerHTML = '<p style="text-align:center;color:var(--muted);font-size:0.85rem;padding:20px 0;">No activity yet.</p>';
        return;
    }
    container.innerHTML = auditLog.map(e => `
        <div class="log-item">
            <div class="log-dot" style="background:${e.color}"></div>
            <div>
                <div class="log-text">${e.text}</div>
                <div class="log-time">${e.time}</div>
            </div>
        </div>
    `).join('');
}

// â”€â”€ REMINDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleReminder(btn, name) {
    const armed = btn.classList.toggle('armed');
    btn.textContent = armed ? 'âœ“ Armed' : 'ğŸ”” Set';
    if (armed) {
        addAuditEntry(`Reminder armed for <strong>${name}</strong>`, 'var(--warning)');
        showToast('ğŸ”” Reminder armed for ' + name);
        if (Notification.permission === 'granted') {
            new Notification('Reminder Armed', { body: `You'll be alerted before: ${name}` });
        } else if (Notification.permission !== 'denied') {
            Notification.requestPermission();
        }
    } else {
        showToast('Reminder removed');
    }
}

// â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openModal(type) {
    document.getElementById('modal-' + type).classList.add('show');
}

function closeModal() {
    document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('show'));
}

function saveResolution() {
    const text = document.getElementById('resolution-text').value.trim();
    const owner = document.getElementById('resolution-owner').value;
    if (!text) { showToast('âš  Please describe the resolution'); return; }
    addAuditEntry(`Resolution logged by <strong>${owner || 'Director'}</strong>: "${text.substring(0,40)}â€¦"`, 'var(--safe)');
    document.getElementById('resolution-text').value = '';
    document.getElementById('resolution-owner').value = '';
    closeModal();
    showToast('âœ“ Resolution recorded');
}

// â”€â”€ TOAST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2600);
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
runCompliance();
addAuditEntry('<strong>Portal</strong> initialized Â· CNS Director Command', 'var(--accent2)');
</script>
</body>
</html>
